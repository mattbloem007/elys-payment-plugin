{"id":"i8R8","dependencies":[{"name":"/Users/gabriel/Documents/paymentelys/package.json","includedInParent":true,"mtime":1630498634517},{"name":"/Users/gabriel/Documents/paymentelys/node_modules/@ethereumjs/tx/package.json","includedInParent":true,"mtime":1629877548001},{"name":"@ethereumjs/common","loc":{"line":34,"column":39},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/@ethereumjs/tx/dist.browser/baseTransaction.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/@ethereumjs/common/dist.browser/index.js"},{"name":"ethereumjs-util","loc":{"line":35,"column":32},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/@ethereumjs/tx/dist.browser/baseTransaction.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/ethereumjs-util/dist.browser/index.js"},{"name":"./types","loc":{"line":36,"column":22},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/@ethereumjs/tx/dist.browser/baseTransaction.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/@ethereumjs/tx/dist.browser/types.js"}],"generated":{"js":"\"use strict\";var t=this&&this.__values||function(t){var e=\"function\"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&\"number\"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")},e=this&&this.__read||function(t,e){var i=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,o=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){n={error:s}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.BaseTransaction=void 0;var r=i(require(\"@ethereumjs/common\")),n=require(\"ethereumjs-util\"),o=require(\"./types\"),a=function(){function i(t){this.activeCapabilities=[],this.DEFAULT_CHAIN=\"mainnet\",this.DEFAULT_HARDFORK=\"istanbul\";var e=t.nonce,i=t.gasLimit,r=t.to,o=t.value,a=t.data,s=t.v,u=t.r,h=t.s,l=t.type;this._type=new n.BN(n.toBuffer(l)).toNumber();var f=n.toBuffer(\"\"===r?\"0x\":r),c=n.toBuffer(\"\"===s?\"0x\":s),d=n.toBuffer(\"\"===u?\"0x\":u),p=n.toBuffer(\"\"===h?\"0x\":h);this.nonce=new n.BN(n.toBuffer(\"\"===e?\"0x\":e)),this.gasLimit=new n.BN(n.toBuffer(\"\"===i?\"0x\":i)),this.to=f.length>0?new n.Address(f):void 0,this.value=new n.BN(n.toBuffer(\"\"===o?\"0x\":o)),this.data=n.toBuffer(\"\"===a?\"0x\":a),this.v=c.length>0?new n.BN(c):void 0,this.r=d.length>0?new n.BN(d):void 0,this.s=p.length>0?new n.BN(p):void 0,this._validateCannotExceedMaxInteger({nonce:this.nonce,gasLimit:this.gasLimit,value:this.value,r:this.r,s:this.s})}return Object.defineProperty(i.prototype,\"transactionType\",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,\"type\",{get:function(){return this._type},enumerable:!1,configurable:!0}),i.prototype.supports=function(t){return this.activeCapabilities.includes(t)},i.prototype.validate=function(t){void 0===t&&(t=!1);var e=[];return this.getBaseFee().gt(this.gasLimit)&&e.push(\"gasLimit is too low. given \"+this.gasLimit+\", need at least \"+this.getBaseFee()),this.isSigned()&&!this.verifySignature()&&e.push(\"Invalid Signature\"),t?e:0===e.length},i.prototype.getBaseFee=function(){var t=this.getDataFee().addn(this.common.param(\"gasPrices\",\"tx\"));return this.common.gteHardfork(\"homestead\")&&this.toCreationAddress()&&t.iaddn(this.common.param(\"gasPrices\",\"txCreation\")),t},i.prototype.getDataFee=function(){for(var t=this.common.param(\"gasPrices\",\"txDataZero\"),e=this.common.param(\"gasPrices\",\"txDataNonZero\"),i=0,r=0;r<this.data.length;r++)0===this.data[r]?i+=t:i+=e;return new n.BN(i)},i.prototype.toCreationAddress=function(){return void 0===this.to||0===this.to.buf.length},i.prototype.isSigned=function(){var t=this.v,e=this.r,i=this.s;return 0===this.type?!!(t&&e&&i):!(void 0===t||!e||!i)},i.prototype.verifySignature=function(){try{var t=this.getSenderPublicKey();return 0!==n.unpadBuffer(t).length}catch(e){return!1}},i.prototype.getSenderAddress=function(){return new n.Address(n.publicToAddress(this.getSenderPublicKey()))},i.prototype.sign=function(t){if(32!==t.length)throw new Error(\"Private key must be 32 bytes in length.\");var e=!1;0===this.type&&this.common.gteHardfork(\"spuriousDragon\")&&!this.supports(o.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(o.Capability.EIP155ReplayProtection),e=!0);var i=this.getMessageToSign(!0),r=n.ecsign(i,t),a=r.v,s=r.r,u=r.s,h=this._processSignature(a,s,u);if(e){var l=this.activeCapabilities.indexOf(o.Capability.EIP155ReplayProtection);l>-1&&this.activeCapabilities.splice(l,1)}return h},i.prototype._getCommon=function(t,e){var i;if(e){var o=new n.BN(n.toBuffer(e));if(t){if(!t.chainIdBN().eq(o))throw new Error(\"The chain ID does not match the chain ID of Common\");return t.copy()}return r.default.isSupportedChainId(o)?new r.default({chain:o,hardfork:this.DEFAULT_HARDFORK}):r.default.forCustomChain(this.DEFAULT_CHAIN,{name:\"custom-chain\",networkId:o,chainId:o},this.DEFAULT_HARDFORK)}return null!==(i=null==t?void 0:t.copy())&&void 0!==i?i:new r.default({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})},i.prototype._validateCannotExceedMaxInteger=function(i,r){var o,a;void 0===r&&(r=53);try{for(var s=t(Object.entries(i)),u=s.next();!u.done;u=s.next()){var h=e(u.value,2),l=h[0],f=h[1];if(53===r){if(null==f?void 0:f.gt(n.MAX_INTEGER))throw new Error(l+\" cannot exceed MAX_INTEGER, given \"+f)}else{if(256!==r)throw new Error(\"unimplemented bits value\");if(null==f?void 0:f.gte(n.TWO_POW256))throw new Error(l+\" must be less than 2^256, given \"+f)}}}catch(c){o={error:c}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}},i}();exports.BaseTransaction=a;"},"sourceMaps":null,"error":null,"hash":"5dcf39f4e2d66a8ce2aab3aae850f6df","cacheData":{"env":{}}}