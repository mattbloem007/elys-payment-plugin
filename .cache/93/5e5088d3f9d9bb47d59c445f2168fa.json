{"id":"cnad","dependencies":[{"name":"/Users/gabriel/Documents/paymentelys/package.json","includedInParent":true,"mtime":1630498634517},{"name":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/package.json","includedInParent":true,"mtime":1629877547503},{"name":"util","loc":{"line":20,"column":32},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/util/util.js"},{"name":"web3-core-helpers","loc":{"line":21,"column":21},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-helpers/lib/index.js"},{"name":"./jsonrpc.js","loc":{"line":22,"column":22},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/jsonrpc.js"},{"name":"./batch.js","loc":{"line":23,"column":27},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/batch.js"},{"name":"./givenProvider.js","loc":{"line":24,"column":28},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/givenProvider.js"},{"name":"web3-providers-ws","loc":{"line":44,"column":31},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-providers-ws/lib/index.js"},{"name":"web3-providers-http","loc":{"line":45,"column":26},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-providers-http/lib/index.js"},{"name":"web3-providers-ipc","loc":{"line":46,"column":25},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-requestmanager/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-providers-ipc/lib/index.js"}],"generated":{"js":"\"use strict\";const{callbackify:r}=require(\"util\");var i=require(\"web3-core-helpers\").errors,e=require(\"./jsonrpc.js\"),s=require(\"./batch.js\"),o=require(\"./givenProvider.js\"),t=function r(i,e){this.provider=null,this.providers=r.providers,this.setProvider(i,e),this.subscriptions=new Map};t.givenProvider=o,t.providers={WebsocketProvider:require(\"web3-providers-ws\"),HttpProvider:require(\"web3-providers-http\"),IpcProvider:require(\"web3-providers-ipc\")},t.prototype.setProvider=function(r,e){var s=this;if(r&&\"string\"==typeof r&&this.providers)if(/^http(s)?:\\/\\//i.test(r))r=new this.providers.HttpProvider(r);else if(/^ws(s)?:\\/\\//i.test(r))r=new this.providers.WebsocketProvider(r);else if(r&&\"object\"==typeof e&&\"function\"==typeof e.connect)r=new this.providers.IpcProvider(r,e);else if(r)throw new Error(\"Can't autodetect provider for \\\"\"+r+'\"');if(this.provider&&this.provider.connected&&this.clearSubscriptions(),this.provider=r||null,this.provider&&this.provider.on){\"function\"==typeof r.request?this.provider.on(\"message\",function(r){if(r&&\"eth_subscription\"===r.type&&r.data){const i=r.data;i.subscription&&s.subscriptions.has(i.subscription)&&s.subscriptions.get(i.subscription).callback(null,i.result)}}):this.provider.on(\"data\",function(r,i){(r=r||i).method&&r.params&&r.params.subscription&&s.subscriptions.has(r.params.subscription)&&s.subscriptions.get(r.params.subscription).callback(null,r.params.result)}),this.provider.on(\"connect\",function(){s.subscriptions.forEach(function(r){r.subscription.resubscribe()})}),this.provider.on(\"error\",function(r){s.subscriptions.forEach(function(i){i.callback(r)})});const e=function(r){s._isCleanCloseEvent(r)&&!s._isIpcCloseError(r)||(s.subscriptions.forEach(function(e){e.callback(i.ConnectionCloseError(r)),s.subscriptions.delete(e.subscription.id)}),s.provider&&s.provider.emit&&s.provider.emit(\"error\",i.ConnectionCloseError(r))),s.provider&&s.provider.emit&&s.provider.emit(\"end\",r)};this.provider.on(\"close\",e),this.provider.on(\"disconnect\",e)}},t.prototype.send=function(s,o){if(o=o||function(){},!this.provider)return o(i.InvalidProvider());const{method:t,params:n}=s,p=e.toPayload(t,n),c=this._jsonrpcResultCallback(o,p);if(this.provider.request){r(this.provider.request.bind(this.provider))({method:t,params:n},o)}else if(this.provider.sendAsync)this.provider.sendAsync(p,c);else{if(!this.provider.send)throw new Error(\"Provider does not have a request or send method to use.\");this.provider.send(p,c)}},t.prototype.sendBatch=function(r,s){if(!this.provider)return s(i.InvalidProvider());var o=e.toBatchPayload(r);this.provider[this.provider.sendAsync?\"sendAsync\":\"send\"](o,function(r,e){return r?s(r):Array.isArray(e)?void s(null,e):s(i.InvalidResponse(e))})},t.prototype.addSubscription=function(r,i){if(!this.provider.on)throw new Error(\"The provider doesn't support subscriptions: \"+this.provider.constructor.name);this.subscriptions.set(r.id,{callback:i,subscription:r})},t.prototype.removeSubscription=function(r,i){if(this.subscriptions.has(r)){var e=this.subscriptions.get(r).subscription.options.type;return this.subscriptions.delete(r),void this.send({method:e+\"_unsubscribe\",params:[r]},i)}\"function\"==typeof i&&i(null)},t.prototype.clearSubscriptions=function(r){try{var i=this;return this.subscriptions.size>0&&this.subscriptions.forEach(function(e,s){r&&\"syncing\"===e.name||i.removeSubscription(s)}),this.provider.reset&&this.provider.reset(),!0}catch(e){throw new Error(`Error while clearing subscriptions: ${e}`)}},t.prototype._isCleanCloseEvent=function(r){return\"object\"==typeof r&&([1e3].includes(r.code)||!0===r.wasClean)},t.prototype._isIpcCloseError=function(r){return\"boolean\"==typeof r&&r},t.prototype._jsonrpcResultCallback=function(r,s){return function(o,t){return t&&t.id&&s.id!==t.id?r(new Error(`Wrong response id ${t.id} (expected: ${s.id}) in ${JSON.stringify(s)}`)):o?r(o):t&&t.error?r(i.ErrorResponse(t)):e.isValidResponse(t)?void r(null,t.result):r(i.InvalidResponse(t))}},module.exports={Manager:t,BatchManager:s};"},"sourceMaps":null,"error":null,"hash":"8d311c3f4a5ad82a25913a7c36378ff5","cacheData":{"env":{}}}