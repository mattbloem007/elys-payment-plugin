{"id":"ZwQN","dependencies":[{"name":"/Users/gabriel/Documents/paymentelys/package.json","includedInParent":true,"mtime":1631654689386},{"name":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/package.json","includedInParent":true,"mtime":1629877547485},{"name":"web3-core","loc":{"line":23,"column":19},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core/lib/index.js"},{"name":"web3-core-method","loc":{"line":24,"column":21},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-method/lib/index.js"},{"name":"eth-lib/lib/account","loc":{"line":25,"column":22},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/eth-lib/lib/account.js"},{"name":"eth-lib/lib/hash","loc":{"line":26,"column":19},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/eth-lib/lib/hash.js"},{"name":"crypto-browserify","loc":{"line":27,"column":53},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/crypto-browserify/index.js"},{"name":"crypto","loc":{"line":27,"column":84},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/crypto-browserify/index.js"},{"name":"scrypt-js","loc":{"line":28,"column":21},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/scrypt-js/scrypt.js"},{"name":"uuid","loc":{"line":29,"column":19},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/node_modules/uuid/index.js"},{"name":"web3-utils","loc":{"line":30,"column":20},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-utils/lib/index.js"},{"name":"web3-core-helpers","loc":{"line":31,"column":22},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/web3-core-helpers/lib/index.js"},{"name":"@ethereumjs/tx","loc":{"line":32,"column":37},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/@ethereumjs/tx/dist.browser/index.js"},{"name":"@ethereumjs/common","loc":{"line":34,"column":24},"parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/@ethereumjs/common/dist.browser/index.js"},{"name":"buffer","parent":"/Users/gabriel/Documents/paymentelys/node_modules/web3-eth-accounts/lib/index.js","resolved":"/Users/gabriel/Documents/paymentelys/node_modules/node-libs-browser/node_modules/buffer/index.js"}],"generated":{"js":"var global = arguments[3];\nvar Buffer = require(\"buffer\").Buffer;\nvar e=arguments[3],r=require(\"buffer\").Buffer,t=require(\"web3-core\"),o=require(\"web3-core-method\"),n=require(\"eth-lib/lib/account\"),a=require(\"eth-lib/lib/hash\"),i=void 0===e?require(\"crypto-browserify\"):require(\"crypto\"),s=require(\"scrypt-js\"),c=require(\"uuid\"),h=require(\"web3-utils\"),d=require(\"web3-core-helpers\"),{TransactionFactory:u}=require(\"@ethereumjs/tx\"),m=require(\"@ethereumjs/common\").default,p=require(\"@ethereumjs/common\").Hardfork,f=function(e){return null==e},l=function(){var e=this;t.packageInit(this,arguments),delete this.BatchRequest,delete this.extend;var r=[new o({name:\"getNetworkId\",call:\"net_version\",params:0,outputFormatter:parseInt}),new o({name:\"getChainId\",call:\"eth_chainId\",params:0,outputFormatter:h.hexToNumber}),new o({name:\"getGasPrice\",call:\"eth_gasPrice\",params:0}),new o({name:\"getTransactionCount\",call:\"eth_getTransactionCount\",params:2,inputFormatter:[function(e){if(h.isAddress(e))return e;throw new Error(\"Address \"+e+' is not a valid address to get the \"transactionCount\".')},function(){return\"latest\"}]}),new o({name:\"getBlockByNumber\",call:\"eth_getBlockByNumber\",params:2,inputFormatter:[function(e){return e?h.toHex(e):\"latest\"},function(){return!1}]})];this._ethereumCall={},r.forEach(r=>{r.attachToObject(e._ethereumCall),r.setRequestManager(e._requestManager)}),this.wallet=new x(this)};function y(e){if(e.common&&e.chain&&e.hardfork)return new Error(\"Please provide the @ethereumjs/common object or the chain and hardfork property but not all together.\");if(e.chain&&!e.hardfork||e.hardfork&&!e.chain)return new Error('When specifying chain and hardfork, both values must be defined. Received \"chain\": '+e.chain+', \"hardfork\": '+e.hardfork);if(!(e.gas||e.gasLimit||e.maxPriorityFeePerGas||e.maxFeePerGas))return new Error('\"gas\" is missing');if(e.gas&&e.gasPrice){if(e.gas<0||e.gasPrice<0)return new Error(\"Gas or gasPrice is lower than 0\")}else if(e.maxPriorityFeePerGas<0||e.maxFeePerGas<0)return new Error(\"maxPriorityFeePerGas or maxFeePerGas is lower than 0\");return e.nonce<0||e.chainId<0?new Error(\"Nonce or chainId is lower than 0\"):void 0}function g(e){const r=void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas;let t;if(void 0!==e.type?t=h.toHex(e.type):void 0===e.type&&r&&(t=\"0x2\"),void 0!==e.gasPrice&&(\"0x2\"===t||r))throw Error(\"eip-1559 transactions don't support gasPrice\");if((\"0x1\"===t||\"0x0\"===t)&&r)throw Error(\"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas\");return r||e.common&&e.common.hardfork&&e.common.hardfork.toLowerCase()===p.London||e.hardfork&&e.hardfork.toLowerCase()===p.London?t=\"0x2\":(e.accessList||e.common&&e.common.hardfork&&e.common.hardfork.toLowerCase()===p.Berlin||e.hardfork&&e.hardfork.toLowerCase()===p.Berlin)&&(t=\"0x1\"),t}function v(e,r){return new Promise((t,o)=>{try{(void 0===r.type||r.type<\"0x2\")&&void 0!==r.gasPrice?t({gasPrice:r.gasPrice}):Promise.all([e._ethereumCall.getBlockByNumber(),e._ethereumCall.getGasPrice()]).then(e=>{const[o,n]=e;if(\"0x2\"===r.type&&o&&o.baseFeePerGas){let e,n;r.gasPrice?(e=r.gasPrice,n=r.gasPrice,delete r.gasPrice):(e=r.maxPriorityFeePerGas||\"0x3B9ACA00\",n=r.maxFeePerGas||h.toHex(h.toBN(o.baseFeePerGas).mul(h.toBN(2)).add(h.toBN(e)))),t({maxFeePerGas:n,maxPriorityFeePerGas:e})}else{if(r.maxPriorityFeePerGas||r.maxFeePerGas)throw Error(\"Network doesn't support eip-1559\");t({gasPrice:n})}})}catch(n){o(n)}})}function x(e){this._accounts=e,this.length=0,this.defaultKeyName=\"web3js_wallet\"}function w(e){var r;try{r=window[e];var t=\"__storage_test__\";return r.setItem(t,t),r.removeItem(t),!0}catch(o){return o&&(22===o.code||1014===o.code||\"QuotaExceededError\"===o.name||\"NS_ERROR_DOM_QUOTA_REACHED\"===o.name)&&r&&0!==r.length}}l.prototype._addAccountFunctions=function(e){var r=this;return e.signTransaction=function(t,o){return r.signTransaction(t,e.privateKey,o)},e.sign=function(t){return r.sign(t,e.privateKey)},e.encrypt=function(t,o){return r.encrypt(e.privateKey,t,o)},e},l.prototype.create=function(e){return this._addAccountFunctions(n.create(e||h.randomHex(32)))},l.prototype.privateKeyToAccount=function(e,r){if(e.startsWith(\"0x\")||(e=\"0x\"+e),!r&&66!==e.length)throw new Error(\"Private key must be 32 bytes long\");return this._addAccountFunctions(n.fromPrivate(e))},l.prototype.signTransaction=function(e,t,o){var n=!1,a={},i=!(!e||!(e.chain&&e.hardfork||e.common));if(o=o||function(){},!e)return n=new Error(\"No transaction object given!\"),o(n),Promise.reject(n);function s(e){const n=y(e);if(n)return o(n),Promise.reject(n);try{var s=d.formatters.inputCallFormatter(Object.assign({},e));s.data=s.data||\"0x\",s.value=s.value||\"0x\",s.gasLimit=s.gasLimit||s.gas,\"0x1\"===s.type&&void 0===s.accessList&&(s.accessList=[]),i?(s.common&&(a.common=m.forCustomChain(s.common.baseChain||\"mainnet\",{name:s.common.customChain.name||\"custom-network\",networkId:s.common.customChain.networkId,chainId:s.common.customChain.chainId},s.common.hardfork||p.London),delete s.common),s.chain&&(a.chain=s.chain,delete s.chain),s.hardfork&&(a.hardfork=s.hardfork,delete s.hardfork)):(a.common=m.forCustomChain(\"mainnet\",{name:\"custom-network\",networkId:s.networkId,chainId:s.chainId},s.hardfork||p.London),delete s.networkId),t.startsWith(\"0x\")&&(t=t.substring(2));var c=u.fromTxData(s,a).sign(r.from(t,\"hex\")),f=c.validate(!0);if(f.length>0){let e=\"Signer Error: \";for(const r of f)e+=`${e} ${r}.`;throw new Error(e)}var l=\"0x\"+c.serialize().toString(\"hex\"),g=h.keccak256(l),v={messageHash:\"0x\"+r.from(c.getMessageToSign(!0)).toString(\"hex\"),v:\"0x\"+r.from(c.v).toString(\"hex\"),r:\"0x\"+r.from(c.r).toString(\"hex\"),s:\"0x\"+r.from(c.s).toString(\"hex\"),rawTransaction:l,transactionHash:g};return o(null,v),v}catch(x){return o(x),Promise.reject(x)}}return e.type=g(e),void 0!==e.nonce&&void 0!==e.chainId&&(void 0!==e.gasPrice||void 0!==e.maxFeePerGas&&void 0!==e.maxPriorityFeePerGas)&&i?Promise.resolve(s(e)):Promise.all([f(e.chainId)?this._ethereumCall.getChainId():e.chainId,f(e.nonce)?this._ethereumCall.getTransactionCount(this.privateKeyToAccount(t).address):e.nonce,f(i)?this._ethereumCall.getNetworkId():1,v(this,e)]).then(function(r){if(f(r[0])||f(r[1])||f(r[2])||f(r[3]))throw new Error('One of the values \"chainId\", \"networkId\", \"gasPrice\", or \"nonce\" couldn\\'t be fetched: '+JSON.stringify(r));return s({...e,chainId:r[0],nonce:r[1],networkId:r[2],...r[3]})})},l.prototype.recoverTransaction=function(e,t={}){const o=r.from(e.slice(2),\"hex\"),n=u.fromSerializedData(o);return h.toChecksumAddress(n.getSenderAddress().toString(\"hex\"))},l.prototype.hashMessage=function(e){var t=h.isHexStrict(e)?e:h.utf8ToHex(e),o=h.hexToBytes(t),n=r.from(o),i=\"\u0019Ethereum Signed Message:\\n\"+o.length,s=r.from(i),c=r.concat([s,n]);return a.keccak256s(c)},l.prototype.sign=function(e,r){if(r.startsWith(\"0x\")||(r=\"0x\"+r),66!==r.length)throw new Error(\"Private key must be 32 bytes long\");var t=this.hashMessage(e),o=n.sign(t,r),a=n.decodeSignature(o);return{message:e,messageHash:t,v:a[0],r:a[1],s:a[2],signature:o}},l.prototype.recover=function(e,r,t){var o=[].slice.apply(arguments);return e&&\"object\"==typeof e?this.recover(e.messageHash,n.encodeSignature([e.v,e.r,e.s]),!0):(t||(e=this.hashMessage(e)),o.length>=4?(t=\"boolean\"==typeof(t=o.slice(-1)[0])&&!!t,this.recover(e,n.encodeSignature(o.slice(1,4)),t)):n.recover(e,r))},l.prototype.decrypt=function(e,t,o){if(\"string\"!=typeof t)throw new Error(\"No password given.\");var n,a,c=e&&\"object\"==typeof e?e:JSON.parse(o?e.toLowerCase():e);if(3!==c.version)throw new Error(\"Not a valid V3 wallet\");if(\"scrypt\"===c.crypto.kdf)a=c.crypto.kdfparams,n=s.syncScrypt(r.from(t),r.from(a.salt,\"hex\"),a.n,a.r,a.p,a.dklen);else{if(\"pbkdf2\"!==c.crypto.kdf)throw new Error(\"Unsupported key derivation scheme\");if(\"hmac-sha256\"!==(a=c.crypto.kdfparams).prf)throw new Error(\"Unsupported parameters to PBKDF2\");n=i.pbkdf2Sync(r.from(t),r.from(a.salt,\"hex\"),a.c,a.dklen,\"sha256\")}var d=r.from(c.crypto.ciphertext,\"hex\");if(h.sha3(r.from([...n.slice(16,32),...d])).replace(\"0x\",\"\")!==c.crypto.mac)throw new Error(\"Key derivation failed - possibly wrong password\");var u=i.createDecipheriv(c.crypto.cipher,n.slice(0,16),r.from(c.crypto.cipherparams.iv,\"hex\")),m=\"0x\"+r.from([...u.update(d),...u.final()]).toString(\"hex\");return this.privateKeyToAccount(m,!0)},l.prototype.encrypt=function(e,t,o){var n,a=this.privateKeyToAccount(e,!0),d=(o=o||{}).salt||i.randomBytes(32),u=o.iv||i.randomBytes(16),m=o.kdf||\"scrypt\",p={dklen:o.dklen||32,salt:d.toString(\"hex\")};if(\"pbkdf2\"===m)p.c=o.c||262144,p.prf=\"hmac-sha256\",n=i.pbkdf2Sync(r.from(t),r.from(p.salt,\"hex\"),p.c,p.dklen,\"sha256\");else{if(\"scrypt\"!==m)throw new Error(\"Unsupported kdf\");p.n=o.n||8192,p.r=o.r||8,p.p=o.p||1,n=s.syncScrypt(r.from(t),r.from(p.salt,\"hex\"),p.n,p.r,p.p,p.dklen)}var f=i.createCipheriv(o.cipher||\"aes-128-ctr\",n.slice(0,16),u);if(!f)throw new Error(\"Unsupported cipher\");var l=r.from([...f.update(r.from(a.privateKey.replace(\"0x\",\"\"),\"hex\")),...f.final()]),y=h.sha3(r.from([...n.slice(16,32),...l])).replace(\"0x\",\"\");return{version:3,id:c.v4({random:o.uuid||i.randomBytes(16)}),address:a.address.toLowerCase().replace(\"0x\",\"\"),crypto:{ciphertext:l.toString(\"hex\"),cipherparams:{iv:u.toString(\"hex\")},cipher:o.cipher||\"aes-128-ctr\",kdf:m,kdfparams:p,mac:y.toString(\"hex\")}}},x.prototype._findSafeIndex=function(e){return e=e||0,this.hasOwnProperty(e)?this._findSafeIndex(e+1):e},x.prototype._currentIndexes=function(){return Object.keys(this).map(function(e){return parseInt(e)}).filter(function(e){return e<9e20})},x.prototype.create=function(e,r){for(var t=0;t<e;++t)this.add(this._accounts.create(r).privateKey);return this},x.prototype.add=function(e){return\"string\"==typeof e&&(e=this._accounts.privateKeyToAccount(e)),this[e.address]?this[e.address]:((e=this._accounts.privateKeyToAccount(e.privateKey)).index=this._findSafeIndex(),this[e.index]=e,this[e.address]=e,this[e.address.toLowerCase()]=e,this.length++,e)},x.prototype.remove=function(e){var r=this[e];return!(!r||!r.address)&&(this[r.address].privateKey=null,delete this[r.address],this[r.address.toLowerCase()].privateKey=null,delete this[r.address.toLowerCase()],this[r.index].privateKey=null,delete this[r.index],this.length--,!0)},x.prototype.clear=function(){var e=this;return this._currentIndexes().forEach(function(r){e.remove(r)}),this},x.prototype.encrypt=function(e,r){var t=this;return this._currentIndexes().map(function(o){return t[o].encrypt(e,r)})},x.prototype.decrypt=function(e,r){var t=this;return e.forEach(function(e){var o=t._accounts.decrypt(e,r);if(!o)throw new Error(\"Couldn't decrypt accounts. Password wrong?\");t.add(o)}),this},x.prototype.save=function(e,r){return localStorage.setItem(r||this.defaultKeyName,JSON.stringify(this.encrypt(e))),!0},x.prototype.load=function(e,r){var t=localStorage.getItem(r||this.defaultKeyName);if(t)try{t=JSON.parse(t)}catch(o){}return this.decrypt(t||[],e)},w(\"localStorage\")||(delete x.prototype.save,delete x.prototype.load),module.exports=l;"},"sourceMaps":null,"error":null,"hash":"3afb3bea7c1e4e8995910e34f2a08a98","cacheData":{"env":{}}}